/*!!
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * All information contained herein is, and remains the property of InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */
(function(){var u=new Date().getTime();var z=null;var M=false;var A=10;var G=false;var a=true;var v=null;var C=1000*60*60*3;var q=document;var B=window;var h=0;var l=0;var r=function(){return""};var E=[];function n(){if(typeof Piwik==="object"&&typeof Piwik.JSON==="object"){return Piwik.JSON}else{if(B.JSON&&B.JSON.parse&&B.JSON.stringify){return B.JSON}else{if(typeof B.JSON2==="object"&&B.JSON2.parse&&B.JSON2.stringify){return B.JSON2}else{return{parse:function(){return{}},stringify:function(){return""}}}}}}var d=true;function e(){if(M&&"undefined"!==typeof console&&console&&console.debug){console.debug.apply(console,arguments)}}function s(O){return typeof O==="object"&&typeof O.length==="number"}function F(){return q.getElementById("engage_video")&&q.getElementById("videoDisplay1_wrapper")
}function b(){return"function"===typeof jwplayer}function k(){return"function"===typeof flowplayer}function o(Q,P){if(!P.getMediaTitle()&&"function"===typeof r){var O=r(Q);if(O){P.setMediaTitle(O)}}}var f={AUDIO:"Audio",VIDEO:"Video"};var D={getLocation:function(){var O=this.location||B.location;if(!O.origin){O.origin=O.protocol+"//"+O.hostname+(O.port?":"+O.port:"")}return O},setLocation:function(O){this.location=O},makeUrlAbsolute:function(P){if((!P||String(P)!==P)&&P!==""){return P}if(P.indexOf("//")===0){return this.getLocation().protocol+P}if(P.indexOf("://")!==-1){return P}if(P.indexOf("/")===0){return this.getLocation().origin+P}if(P.indexOf("#")===0||P.indexOf("?")===0){return this.getLocation().origin+this.getLocation().pathname+P}if(""===P){return this.getLocation().href}var O="(.*/)";var Q=this.getLocation().origin+this.getLocation().pathname.match(new RegExp(O))[0];return Q+P}};var L={getCurrentTime:function(){return new Date().getTime()},roundTimeToSeconds:function(O){return Math.round(O/1000)
},isNumber:function(O){return !isNaN(O)},getTimeScriptLoaded:function(O){return u},generateUniqueId:function(){var R="";var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var Q=P.length;for(var O=0;O<16;O++){R+=P.charAt(Math.floor(Math.random()*Q))}return R},trim:function(O){if(O&&String(O)===O){return O.replace(/^\s+|\s+$/g,"")}return O},getQueryParameter:function(O,S){var R=new RegExp("[?&]"+S+"(=([^&#]*)|&|#|$)");var Q=R.exec(O);if(!Q){return null}if(!Q[2]){return""}var P=Q[2].replace(/\+/g," ");return decodeURIComponent(P)},isDocumentOffScreen:function(){return q&&"undefined"!==q.hidden&&q.hidden}};var m={getAttribute:function(P,O){if(P&&P.getAttribute&&O){return P.getAttribute(O)}return null},setAttribute:function(Q,O,P){if(Q&&Q.setAttribute){Q.setAttribute(O,P)}},isMediaIgnored:function(O){var P=m.getAttribute(O,"data-piwik-ignore");if(!!P||P===""){return true}P=m.getAttribute(O,"data-matomo-ignore");if(!!P||P===""){return true}return false},getMediaResource:function(O,P){var Q=m.getAttribute(O,"data-matomo-resource");
if(Q){return Q}Q=m.getAttribute(O,"data-piwik-resource");if(Q){return Q}Q=m.getAttribute(O,"src");if(Q){return Q}return P},getMediaTitle:function(O){var P=m.getAttribute(O,"data-matomo-title");if(!P){P=m.getAttribute(O,"data-piwik-title")}if(!P){P=m.getAttribute(O,"title")}if(!P){P=m.getAttribute(O,"alt")}return P},hasCssClass:function(Q,R){if(Q&&Q.className){var P=(""+Q.className).split(" ");for(var O=0;O<P.length;O++){if(P[O]===R){return true}}}return false},getFirstParentWithClass:function(Q,R,O){if(O<=0||!Q||!Q.parentNode){return null}var P=Q.parentNode;if(this.hasCssClass(P,R)){return P}else{return this.getFirstParentWithClass(P,R,--O)}},isFullscreen:function(O){if(O&&q.fullScreenElement===O||q.mozFullScreenElement===O||q.webkitFullscreenElement===O||q.msFullscreenElement===O){return true}return false}};function N(){if(null===v){if("object"===typeof Piwik&&Piwik.getAsyncTrackers){return Piwik.getAsyncTrackers()}}if(s(v)){return v}return[]}function j(P,O,Q){this.playerName=P;this.type=O;
this.resource=Q;this.disabled=false;this.reset()}j.piwikTrackers=[];j.prototype.disable=function(){this.disabled=true};j.prototype.reset=function(){this.id=L.generateUniqueId();this.mediaTitle=null;this.timeToInitialPlay=null;this.width=null;this.height=null;this.fullscreen=false;this.timeout=null;this.watchedTime=0;this.lastTimeCheck=null;this.isPlaying=false;this.isPaused=false;this.mediaProgressInSeconds=0;this.mediaLengthInSeconds=0;this.disabled=false;this.numPlaysSameMedia=0;this.numPlaysSameMediaOffScreen=0};j.prototype.setResource=function(O){this.resource=O};j.prototype.getResource=function(){return this.resource};j.prototype.trackEvent=function(U){if(this.disabled){return}if(!z){z=L.getCurrentTime()}else{if((L.getCurrentTime()-z)>C){this.disable();return}}var O=N();var P="Media"+this.type;var S=this.mediaTitle||this.resource;var Q=[P,U,S];Q.push(parseInt(Math.round(this.mediaProgressInSeconds),10));if(O&&O.length){var R=0,T;for(R;R<O.length;R++){T=O[R];if(T&&T.MediaAnalytics&&T.MediaAnalytics.isTrackEventsEnabled()){T.trackEvent.apply(T,Q)
}}}else{if(typeof _paq==="undefined"){_paq=[]}Q.unshift("trackEvent");_paq.push(Q);e("piwikWasNotYetInitialized. This means players were scanning too early for media or there are no async trackers")}e("trackEvent",P,S,U)};j.prototype.trackProgress=function(S,V,U,P,Q,X,af,Y,ac,Z,W,O){if(this.disabled){return}if(!z){z=L.getCurrentTime()}else{if((L.getCurrentTime()-z)>C){this.disable();return}}var ae={ma_id:S,ma_ti:V!==null?V:"",ma_pn:U,ma_mt:P,ma_re:Q,ma_st:parseInt(X,10),ma_ps:parseInt(af,10),ma_le:Y,ma_ttp:ac!==null?ac:"",ma_w:Z?Z:"",ma_h:W?W:"",ma_fs:O?"1":"0"};var aa="";for(var T in ae){if(Object.prototype.hasOwnProperty.call(ae,T)){aa+=T+"="+encodeURIComponent(ae[T])+"&"}}var ad=N();if(ad&&ad.length){var ab=0,R;for(ab;ab<ad.length;ab++){R=ad[ab];if(R&&R.MediaAnalytics&&R.MediaAnalytics.isTrackProgressEnabled()){R.trackRequest(aa)}}}else{if(typeof _paq==="undefined"){_paq=[]}_paq.push(["trackRequest",aa]);e("piwikWasNotYetInitialized. This means players were scanning too early for media or there are no async trackers")
}if(M){e("trackProgress",n().stringify(ae))}};j.prototype.setFullscreen=function(O){if(!this.fullscreen){this.fullscreen=!!O}};j.prototype.setWidth=function(O){if(L.isNumber(O)){this.width=parseInt(O,10)}};j.prototype.setHeight=function(O){if(L.isNumber(O)){this.height=parseInt(O,10)}};j.prototype.setMediaTitle=function(O){this.mediaTitle=O};j.prototype.getMediaTitle=function(){return this.mediaTitle};j.prototype.setMediaProgressInSeconds=function(O){this.mediaProgressInSeconds=O};j.prototype.getMediaProgressInSeconds=function(){return this.mediaProgressInSeconds};j.prototype.setMediaTotalLengthInSeconds=function(O){this.mediaLengthInSeconds=O};j.prototype.getMediaTotalLengthInSeconds=function(){return this.mediaLengthInSeconds};j.prototype.play=function(){if(this.isPlaying){return}this.isPlaying=true;this.startWatchedTime();if(d&&this.timeToInitialPlay===null){this.timeToInitialPlay=L.roundTimeToSeconds(L.getCurrentTime()-L.getTimeScriptLoaded())}d=false;if(this.isPaused){this.isPaused=false;
this.trackEvent("resume")}else{this.trackEvent("play");var O=L.isDocumentOffScreen();this.numPlaysSameMedia++;h++;if(O){this.numPlaysSameMediaOffScreen++;l++}if(this.numPlaysSameMedia>25||h>50){this.disable()}else{if(this.numPlaysSameMediaOffScreen>10||l>15){this.disable()}}}this.trackUpdate()};j.prototype.startWatchedTime=function(){this.lastTimeCheck=L.getCurrentTime()};j.prototype.stopWatchedTime=function(){if(this.lastTimeCheck){this.watchedTime+=L.getCurrentTime()-this.lastTimeCheck;this.lastTimeCheck=null}};j.prototype.seekStart=function(){if(this.isPlaying){this.stopWatchedTime()}};j.prototype.seekFinish=function(){if(this.isPlaying){this.startWatchedTime()}};j.prototype.pause=function(){if(this.isPlaying){this.isPaused=true;this.isPlaying=false;if(this.timeout){clearTimeout(this.timeout);this.timeout=null}this.stopWatchedTime();this.trackUpdate();this.trackEvent("pause")}};j.prototype.finish=function(){if(this.timeout){clearTimeout(this.timeout);this.timeout=null}this.stopWatchedTime();
this.trackUpdate();this.trackEvent("finish");this.id=L.generateUniqueId();this.timeToInitialPlay=null;this.lastTimeCheck=null;this.isPlaying=false;this.isPaused=false;this.watchedTime=0;this.mediaProgressInSeconds=0};j.prototype.trackUpdate=function(){if(this.timeout){clearTimeout(this.timeout);this.timeout=null}var O=L.getCurrentTime();if(this.lastTimeCheck){this.watchedTime+=(O-this.lastTimeCheck);this.lastTimeCheck=O}var R=this.mediaLengthInSeconds;if(!R||!L.isNumber(R)){R=""}else{R=parseInt(this.mediaLengthInSeconds,10)}var P=L.roundTimeToSeconds(this.watchedTime);var Q=this.mediaProgressInSeconds;if(Q>R&&R){Q=R}this.trackProgress(this.id,this.mediaTitle,this.playerName,this.type,this.resource,P,Q,R,this.timeToInitialPlay,this.width,this.height,this.fullscreen)};j.prototype.update=function(){if(this.timeout){return}var Q=L.roundTimeToSeconds(this.watchedTime);var P=A;if(!G&&(Q>=3600||h>15)){P=120}else{if(!G&&(Q>=1800||h>10)){P=90}else{if(!G&&(Q>=600||h>4)){P=60}else{if(!G&&(Q>=300||h>2)){P=40
}else{if(!G&&Q>=60){P=20}}}}}P=P*1000;var O=this;this.timeout=setTimeout(function(){O.trackUpdate();O.timeout=null},P)};var c={players:{},registerPlayer:function(O,P){if(!P||!P.scanForMedia||"function"!==typeof P.scanForMedia){throw new Error("A registered player does not implement the scanForMedia function")}O=O.toLowerCase();this.players[O]=P},removePlayer:function(O){O=O.toLowerCase();delete this.players[O]},getPlayer:function(O){O=O.toLowerCase();if(O in this.players){return this.players[O]}return null},getPlayers:function(){return this.players},scanForMedia:function(P){if(!a){return}if("undefined"===typeof P||!P){P=document}var O;for(O in this.players){if(Object.prototype.hasOwnProperty.call(this.players,O)){this.players[O].scanForMedia(P)}}}};var K=function(aa,Q){if(!aa){return}if(!B.addEventListener){return}if(aa.hasPlayerInstance){return}aa.hasPlayerInstance=true;var af=f.VIDEO===Q;var T=D.makeUrlAbsolute(aa.currentSrc);var O=m.getMediaResource(aa,T);var U="html5"+Q.toLowerCase();
if(typeof paella==="object"&&typeof paella.opencast==="object"){U="paella-opencast"}else{if(m.getFirstParentWithClass(aa,"video-js",1)){U="video.js"}else{if(m.hasCssClass(aa,"jw-video")){U="jwplayer"}else{if(m.getFirstParentWithClass(aa,"flowplayer",3)){U="flowplayer"}}}}var S=new j(U,Q,O);E.push(S);function P(){if(aa.duration){S.setMediaTotalLengthInSeconds(aa.duration)}}function V(){if(af){if("undefined"!==typeof aa.videoWidth&&aa.videoWidth){S.setWidth(aa.videoWidth)}else{if("undefined"!==typeof aa.clientWidth&&aa.clientWidth){S.setWidth(aa.clientWidth)}}if("undefined"!==typeof aa.videoHeight&&aa.videoHeight){S.setHeight(aa.videoHeight)}else{if("undefined"!==typeof aa.clientHeight&&aa.clientHeight){S.setHeight(aa.clientHeight)}}S.setFullscreen(m.isFullscreen(aa))}}function W(){S.setMediaProgressInSeconds(aa.currentTime)}function ag(){var ak=m.getMediaTitle(aa);if(ak){S.setMediaTitle(ak)}else{ac(aa,S)}}aj(aa,S);V();ag();P();W();var R=false;var Y=false;var Z=null;if(aa.currentSrc){Z=aa.currentSrc
}function ac(am,aq){if(b()&&!aq.getMediaTitle()){var ao=m.getFirstParentWithClass(am,"jwplayer",2);if(!ao){ao=m.getFirstParentWithClass(am,"jwplayer-video",3);if(ao&&"undefined"!==typeof ao.children&&ao.children&&ao.children.length&&ao.children[0]){ao=ao.children[0]}}if(ao){try{var ar=jwplayer(ao);if(ar&&ar.getPlaylistItem){var at=ar.getPlaylistItem();if(at&&at.matomoTitle){aq.setMediaTitle(at.matomoTitle)}else{if(at&&at.piwikTitle){aq.setMediaTitle(at.piwikTitle)}else{if(at&&at.title){aq.setMediaTitle(at.title)}}}}}catch(an){e(an)}}}if(k()&&!aq.getMediaTitle()){var ak=m.getFirstParentWithClass(am,"flowplayer",4);if(ak){var ar=flowplayer(ak);if(ar&&ar.video&&ar.video.matomoTitle){aq.setMediaTitle(ar.video.matomoTitle)}else{if(ar&&ar.video&&ar.video.piwikTitle){aq.setMediaTitle(ar.video.piwikTitle)}else{if(ar&&ar.video&&ar.video.title){aq.setMediaTitle(ar.video.title)}}}}}if(!aq.getMediaTitle()){var al=q.getElementById("engage_basic_description_title");if(al&&al.innerText){var ap=L.trim(al.innerText);
if(ap){aq.setMediaTitle(ap)}}else{if(typeof paella==="object"&&typeof paella.opencast==="object"&&typeof paella.opencast._episode==="object"&&paella.opencast._episode.dcTitle){var ap=L.trim(paella.opencast._episode.dcTitle);if(ap){aq.setMediaTitle(ap)}}}}o(am,aq)}function aj(ao,an){if(b()){var aq=m.getFirstParentWithClass(ao,"jwplayer",2);if(!aq){aq=m.getFirstParentWithClass(ao,"jwplayer-video",3);if(aq&&"undefined"!==typeof aq.children&&aq.children&&aq.children.length&&aq.children[0]){aq=aq.children[0]}}if(aq){try{var al=jwplayer(aq);if(al&&al.getPlaylistItem){var am=al.getPlaylistItem();if(am&&"undefined"!==typeof am.matomoResource&&am.matomoResource){an.setResource(am.matomoResource)}else{if(am&&"undefined"!==typeof am.piwikResource&&am.piwikResource){an.setResource(am.piwikResource)}}}}catch(ap){e(ap)}}}if(k()){var ak=m.getFirstParentWithClass(ao,"flowplayer",4);if(ak){var al=flowplayer(ak);if(al&&al.video&&"undefined"!==typeof al.video.matomoResource&&al.video.matomoResource){an.setResource(al.video.matomoResource)
}else{if(al&&al.video&&"undefined"!==typeof al.video.piwikResource&&al.video.piwikResource){an.setResource(al.video.piwikResource)}}}}}function ab(){if(!Z&&aa.currentSrc){Z=aa.currentSrc}else{if(Z&&aa.currentSrc&&Z!=aa.currentSrc){Z=aa.currentSrc;var al=D.makeUrlAbsolute(Z);var ak=S.getMediaTitle();R=false;S.reset();S.setResource(al);S.setMediaTitle("");var am=m.getMediaTitle(aa);if(am&&am!==ak){S.setMediaTitle(am)}else{ac(aa,S)}aj(aa,S);P()}}}function ai(){if(!Y&&(S.getResource()||S.getMediaTitle())){Y=true;ag(aa,S);aj(aa,S);S.trackUpdate()}}function ad(){ab();V();P();W();ai()}var ae=null;if(aa.loop){ae=0}var X=0;var ah=false;if(aa.loop&&aa.autoplay&&aa.muted){ah=true}aa.addEventListener("playing",function(){ab();if("undefined"!==typeof aa.paused&&aa.paused){return}if("undefined"!==typeof aa.ended&&aa.ended){return}if(!R){W();R=true;S.play()}},true);aa.addEventListener("durationchange",P,true);aa.addEventListener("loadedmetadata",ad,true);aa.addEventListener("loadeddata",ad,true);aa.addEventListener("pause",function(){if(aa.currentTime&&aa.duration&&aa.currentTime===aa.duration){return
}if(aa.seeking){return}W();R=false;S.pause()},true);aa.addEventListener("seeking",function(){if(aa.seeking){W();var ak=parseInt(S.getMediaProgressInSeconds(),10);if((ae===null||ae!==ak)&&X<25){ae=ak;S.trackEvent("seek");X++}}},true);aa.addEventListener("ended",function(){R=false;S.finish()},true);aa.addEventListener("timeupdate",function(){W();P();if(af&&!S.width){V()}if("undefined"!==typeof aa.paused&&aa.paused){return}if("undefined"!==typeof aa.ended&&aa.ended){return}if(ah){var ak=L.roundTimeToSeconds(S.watchedTime);var al=S.getMediaTotalLengthInSeconds();if(ak>=30&&al>=1&&al<30&&(ak/al)>=3){S.disable()}}Y=true;if(!R){R=true;S.play()}else{S.update()}},true);aa.addEventListener("seeking",function(){S.seekStart()},true);aa.addEventListener("seeked",function(){W();P();S.seekFinish()},true);if(af){aa.addEventListener("resize",ad,true);B.addEventListener("resize",function(){V()},false)}S.timeout=setTimeout(function(){ad();S.timeout=null},1500)};K.scanForMedia=function(R){if(!B.addEventListener){return
}var S=F();var V=R.getElementsByTagName("video");var P;for(var Q=0;Q<V.length;Q++){if(!m.isMediaIgnored(V[Q])){P=m.getAttribute(V[Q],"id");if(S){var T=R.getElementById("videoDisplay1_wrapper");if(T&&("function"===typeof T.contains)&&!T.contains(V[Q])){continue}}if(P==="playerContainer_videoContainer_slave_1"&&R.getElementById("playerContainer_videoContainer_master")){continue}if(P!=="video_0"&&R.getElementById("videoPlayerWrapper_0")&&R.getElementById("video_0")){continue}new K(V[Q],f.VIDEO)}}V=null;var O=R.getElementsByTagName("audio");for(var Q=0;Q<O.length;Q++){if(!m.isMediaIgnored(O[Q])){new K(O[Q],f.AUDIO)}}O=null;if("undefined"!==typeof soundManager&&soundManager&&"undefined"!==typeof soundManager.sounds){for(var Q in soundManager.sounds){if(Object.prototype.hasOwnProperty.call(soundManager.sounds,Q)){var U=soundManager.sounds[Q];if(U&&U.isHTML5&&U._a){if(!m.isMediaIgnored(U._a)){new K(U._a,f.AUDIO)}}}}}};var H=function(Q,X){if(!Q||!B.addEventListener){return}if(Q.hasPlayerInstance||!b()){return
}var Y=m.getFirstParentWithClass(Q,"jwplayer",2);if(!Y){return}var ab=jwplayer(Y);if(!ab||!ab.getItem||"undefined"===(typeof ab.getItem())){return}Q.hasPlayerInstance=true;function ad(ae){var af=ae.getPlaylistItem();if(af&&af.matomoResource){return af.matomoResource}if(af&&af.piwikResource){return af.piwikResource}if(af&&af.file){return af.file}return""}function P(af){var ag=af.getPlaylistItem();if(ag&&ag.matomoTitle){return ag.matomoTitle}if(ag&&ag.piwikTitle){return ag.piwikTitle}if(ag&&ag.title){return ag.title}if("function"===typeof r){var ae=r(Q);if(ae){return ae}}return null}function W(ae,af,ah){var ag=ad(ae);if(ah&&ag&&ah!=ag){ah=ag;af.reset();af.setResource(D.makeUrlAbsolute(ah));af.setMediaTitle(P(ae));af.setWidth(ae.getWidth());af.setHeight(ae.getHeight());af.setFullscreen(ae.getFullscreen());return true}return false}var aa=ad(ab);var O=D.makeUrlAbsolute(aa);var R=m.getMediaResource(Q,O);var Z=new j("jwplayer",X,R);Z.setMediaTitle(P(ab));Z.setWidth(ab.getWidth());Z.setHeight(ab.getHeight());
Z.setFullscreen(ab.getFullscreen());E.push(Z);var S=ab.getDuration();if(S){Z.setMediaTotalLengthInSeconds(S)}var T=false,V=aa;var ac=null,U=0;ab.on("play",function(){W(ab,Z,V);T=true;Z.play()},true);ab.on("playlistItem",function(){W(ab,Z,V);if(ab.getState()!=="playing"){T=false}},true);ab.on("pause",function(){if(ab.getPosition()&&ab.getDuration()&&ab.getPosition()===ab.getDuration()){return}Z.pause()},true);ab.on("complete",function(){Z.finish()},true);ab.on("time",function(){var ae=ab.getPosition();if(ae){Z.setMediaProgressInSeconds(ae)}var af=ab.getDuration();if(af){Z.setMediaTotalLengthInSeconds(af)}if(T){Z.update()}else{T=true;Z.play()}},true);ab.on("seek",function(){Z.seekStart()},true);ab.on("seeked",function(){var ae=ab.getPosition();if(ae){Z.setMediaProgressInSeconds(ae)}var ag=ab.getDuration();if(ag){Z.setMediaTotalLengthInSeconds(ag)}Z.seekFinish();var af=parseInt(Z.getMediaProgressInSeconds(),10);if((ac===null||ac!==af)&&U<25){ac=af;Z.trackEvent("seek");U++}},true);ab.on("resize",function(){Z.setWidth(ab.getWidth());
Z.setHeight(ab.getHeight());Z.setFullscreen(ab.getFullscreen())},true);ab.on("fullscreen",function(){Z.setWidth(ab.getWidth());Z.setHeight(ab.getHeight());Z.setFullscreen(ab.getFullscreen())},false);Z.trackUpdate()};H.scanForMedia=function(P){if(!B.addEventListener||!b()){return}var Q=P.getElementsByTagName("object");for(var O=0;O<Q.length;O++){if(!m.isMediaIgnored(Q[O])&&m.hasCssClass(Q[O],"jw-swf")){new H(Q[O],f.VIDEO)}}Q=null};var p=function(R,S){if(!R){return}if(!B.addEventListener){return}if(R.playerInstance){return}R.playerInstance=true;var O=m.getAttribute(R,"src");var Q=m.getMediaResource(R,null);var W=new j("vimeo",S,Q);W.setWidth(R.clientWidth);W.setHeight(R.clientHeight);W.setFullscreen(m.isFullscreen(R));E.push(W);B.addEventListener("resize",function(){W.setWidth(R.clientWidth);W.setHeight(R.clientHeight);W.setFullscreen(m.isFullscreen(R))},false);var V=m.getMediaTitle(R);if(V){W.setMediaTitle(V)}R.matomoNumSeekEvents=0;R.matomoSeekLastTime=null;var P=function(Z){if(!(/^(https?:)?\/\/(player.)?vimeo.com(?=$|\/)/).test(Z.origin)){return false
}if(!Z||!Z.data){return}if(R.contentWindow&&Z.source&&R.contentWindow!==Z.source){return}var aa=Z.data;if("string"===typeof aa){aa=n().parse(Z.data)}if(("event" in aa&&aa.event==="ready")||("method" in aa&&aa.method==="ping")){if(T==="*"){T=Z.origin}if(!R.isVimeoReady){R.isVimeoReady=true;U("addEventListener","play");U("addEventListener","pause");U("addEventListener","finish");U("addEventListener","seek");U("addEventListener","seeked");U("addEventListener","playProgress");U("getVideoTitle")}return}if("method" in aa){e("vimeoMethod",aa.method);switch(aa.method){case"getVideoTitle":if(aa.value){W.setMediaTitle(aa.value)}else{o(R,W)}W.trackUpdate();break;case"getPaused":if(aa.value){W.pause()}}return}if("event" in aa){var X=aa.event;e("vimeoEvent",X);if(aa&&aa.data){aa=aa.data}if(W&&aa&&aa.seconds){if(W.getMediaProgressInSeconds()===aa.seconds&&(X==="playProgress"||X==="timeupdate")){return}W.setMediaProgressInSeconds(aa.seconds)}if(W&&aa&&aa.duration){W.setMediaTotalLengthInSeconds(aa.duration)
}switch(X){case"play":W.play();break;case"timeupdate":case"playProgress":if(W._isSeeking){W._isSeeking=false;W.seekFinish()}W.update();break;case"seek":W.seekStart();W._isSeeking=true;break;case"seeked":var Y=parseInt(W.getMediaProgressInSeconds(),10);if((R.matomoSeekLastTime===null||R.matomoSeekLastTime!==Y)&&R.matomoNumSeekEvents<25){R.matomoSeekLastTime=Y;W.trackEvent("seek");R.matomoNumSeekEvents++}break;case"pause":if(aa&&aa.seconds&&aa&&aa.duration&&aa.seconds===aa.duration){e("ignoring pause event because video is finished");break}setTimeout(function(){U("getPaused")},700);break;case"finish":W.finish();break}}};B.addEventListener("message",P,true);var T="*";W._isSeeking=false;function U(aa,Y){var X={method:aa};if(Y!==undefined){X.value=Y}if(R&&R.contentWindow){if(navigator&&navigator.userAgent){var Z=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));if(Z>=8&&Z<10){X=n().stringify(X)}}R.contentWindow.postMessage(X,T)}}U("ping")};p.scanForMedia=function(Q){if(!B.addEventListener){return
}var P=Q.getElementsByTagName("iframe");for(var O=0;O<P.length;O++){if(m.isMediaIgnored(P[O])){continue}var R=m.getAttribute(P[O],"src");if(R&&R.indexOf("player.vimeo.com")>0){new p(P[O],f.VIDEO)}}P=null};var t=function(S,V){if(!S){return}if(!B.addEventListener){return}if(S.playerInstance){return}var P=m.getMediaResource(S,null);var Y=new j("youtube",V,P);Y.setWidth(S.clientWidth);Y.setHeight(S.clientHeight);Y.setFullscreen(m.isFullscreen(S));E.push(Y);B.addEventListener("resize",function(){Y.setWidth(S.clientWidth);Y.setHeight(S.clientHeight);Y.setFullscreen(m.isFullscreen(S))},false);var X=m.getMediaTitle(S);if(X){Y.setMediaTitle(X)}var Q=false;var R=null;var U=!m.getAttribute(S,"data-piwik-title")&&!m.getAttribute(S,"data-matomo-title");var O=false;var T=false;var W=null;S.playerInstance=new YT.Player(S,{events:{onReady:function(Z){if(!Z||!Z.target){return}if(U&&Z.target&&Z.target.getVideoData){var aa=Z.target.getVideoData();if(aa&&aa.title){Y.setMediaTitle(aa.title)}else{o(S,Y)}}Y.trackUpdate()
},onStateChange:function(Z){if(!Z||!Z.target){return}var ac=Z.target;var ab;if(Z&&"undefined"!==typeof Z.data){ab=Z.data}else{if(!ac.getPlayerState){e("youtubeMissingPlayerState");return}ab=ac.getPlayerState()}e("youtubeStateChange",ab);switch(ab){case YT.PlayerState.ENDED:if(ac.getCurrentTime){Y.setMediaProgressInSeconds(ac.getCurrentTime())}if(ac.getDuration){Y.setMediaTotalLengthInSeconds(ac.getDuration())}Y.finish();if(R){clearInterval(R);R=null}break;case YT.PlayerState.PLAYING:var aa=null;if(ac.getVideoData){aa=ac.getVideoData()}if(!W&&aa&&aa.video_id){W=aa.video_id}else{if(W&&aa&&aa.video_id&&W!=aa.video_id){W=aa.video_id;Y.reset();if(ac.getVideoUrl){Y.setResource(ac.getVideoUrl())}U=true;O=false;Q=false;e("currentVideoId has changed to "+W)}}if(ac.getCurrentTime){Y.setMediaProgressInSeconds(ac.getCurrentTime())}if(ac.getDuration){Y.setMediaTotalLengthInSeconds(ac.getDuration())}if(U){if(aa&&aa.title){Y.setMediaTitle(aa.title)}U=false}if(!O||T){O=true;T=false;Q=false;Y.play()}else{if(Q){Q=false;
Y.seekFinish()}}Y.update();if(!R){R=setInterval(function(){if(Y.isPlaying){if(ac&&ac.getCurrentTime){Y.setMediaProgressInSeconds(ac.getCurrentTime())}Y.update()}},1*1000)}break;case -1:case YT.PlayerState.PAUSED:setTimeout(function(){if(ac&&ac.getPlayerState&&ac.getPlayerState()==YT.PlayerState.PAUSED){if(ac&&ac.getCurrentTime){Y.setMediaProgressInSeconds(ac.getCurrentTime())}Y.pause();T=true;if(R){clearInterval(R);R=null}}},1000);break;case YT.PlayerState.BUFFERING:Y.seekStart();Q=true;if(R){clearInterval(R);R=null}break}}}})};t.scanForMedia=function(X){if(!B.addEventListener){return}var Q=[];var W=X.getElementsByTagName("iframe");for(var U=0;U<W.length;U++){if(m.isMediaIgnored(W[U])){continue}var O=m.getAttribute(W[U],"src");if(O&&(O.indexOf("youtube.com")>0||O.indexOf("youtube-nocookie.com")>0)){m.setAttribute(W[U],"enablejsapi","true");Q.push(W[U])}}W=null;function P(ac,ab){if(!(ac in window)){return}var ad=window[ac];if("function"!==typeof ad){return}try{if(ad.toString&&ad.toString().indexOf("function replaceMe")===0){return
}}catch(aa){}function Z(){try{ad.apply(window,[].slice.call(arguments,0));ab()}catch(ae){ab();throw ae}}window[ac]=Z}function V(){return"object"===typeof YT&&YT&&YT.Player}function T(){if(!V()){return}var Z=X.getElementsByTagName("iframe");for(var aa=0;aa<Z.length;aa++){if(m.isMediaIgnored(Z[aa])){continue}var ab=m.getAttribute(Z[aa],"src");if(ab&&(ab.indexOf("youtube.com")>0||ab.indexOf("youtube-nocookie.com")>0)){if(Z[aa].setAttribute){Z[aa].setAttribute("enablejsapi","1")}new t(Z[aa],f.VIDEO)}}}if(Q&&Q.length){if(V()){T()}else{if(B.onYouTubeIframeAPIReady){P("onYouTubeIframeAPIReady",T)}else{if(B.onYouTubePlayerAPIReady){P("onYouTubePlayerAPIReady",T)}else{B.onYouTubeIframeAPIReady=T;var Y=q.createElement("script");Y.src="https://www.youtube.com/iframe_api";var S=q.getElementsByTagName("script");if(S&&S.length){var R=S[0];R.parentNode.insertBefore(Y,R)}else{if(q.body){q.body.appendChild(Y)}}}}}}Q=null};c.registerPlayer("html5",K);c.registerPlayer("vimeo",p);c.registerPlayer("youtube",t);
c.registerPlayer("jwplayer",H);function y(O){if("undefined"!==typeof O.MediaAnalytics){return}O.MediaAnalytics={enableEvents:true,enableProgress:true,disableTrackEvents:function(){this.enableEvents=false},enableTrackEvents:function(){this.enableEvents=true},isTrackEventsEnabled:function(){return a&&this.enableEvents},disableTrackProgress:function(){this.enableProgress=false},enableTrackProgress:function(){this.enableProgress=true},isTrackProgressEnabled:function(){return a&&this.enableProgress}};Piwik.trigger("MediaAnalytics.TrackerInitialized",[O])}function w(){if(typeof window==="object"&&"function"===typeof B.piwikMediaAnalyticsAsyncInit){B.piwikMediaAnalyticsAsyncInit()}}var x=false;var i=false;function g(){if(!x&&b()){x=true;var P=jwplayer();if("object"===typeof P&&"function"===typeof P.on){P.on("ready",function(Q){c.scanForMedia(document)})}}if(!i&&k()){i=true;flowplayer(function(R,Q){if(R){R.on("ready",function(){c.scanForMedia(document)});R.on("load",function(){c.scanForMedia(document)
})}});var O=flowplayer();if("object"===typeof O&&"function"===typeof O.on){O.on("ready",function(){c.scanForMedia(document)});O.on("load",function(){c.scanForMedia(document)})}}}function I(){Piwik.DOM.onReady(function(){var O=N();if(!O||!s(O)||!O.length){return}c.scanForMedia(document);g()});Piwik.DOM.onLoad(function(){var O=N();if(!O||!s(O)||!O.length){return}c.scanForMedia(document);g()})}function J(){if("object"===typeof B&&"object"===typeof B.Piwik&&"object"===typeof B.Piwik.MediaAnalytics){return}if("object"===typeof B&&!B.Piwik){return}Piwik.MediaAnalytics={utils:L,url:D,element:m,players:c,MediaTracker:j,mediaType:f,scanForMedia:function(Q){c.scanForMedia(Q||document)},setPingInterval:function(Q){if(1>Q){throw new Error("Ping interval needs to be at least one second")}G=true;A=parseInt(Q,10)},removePlayer:function(Q){c.removePlayer(Q)},addPlayer:function(R,Q){c.registerPlayer(R,Q)},disableMediaAnalytics:function(){a=false},enableMediaAnalytics:function(){a=true},setPiwikTrackers:function(Q){if(Q===null){v=null;
return}if(!s(Q)){Q=[Q]}v=Q},setMediaTitleFallback:function(Q){if("function"!==typeof Q){throw new Error("The mediaTitleFallback needs to be callback function")}r=Q},getPiwikTrackers:function(){return N()},isMediaAnalyticsEnabled:function(){return a},setMaxTrackingTime:function(Q){C=parseInt(Q,10)*1000},enableDebugMode:function(){M=true}};Piwik.addPlugin("MediaAnalytics",{unload:function(){var R;e("tracker intances mediaTrackerInstances");for(var Q=0;Q<E.length;Q++){R=E[Q];if(R&&R.timeout){e("before unload");R.trackUpdate()}}}});if(B.Piwik.initialized){var O=Piwik.getAsyncTrackers();var P=0;for(P;P<O.length;P++){y(O[P])}Piwik.on("TrackerSetup",y);Piwik.retryMissedPluginCalls();w();I()}else{Piwik.on("TrackerSetup",y);Piwik.on("PiwikInitialized",function(){w();I()})}}if("object"===typeof B.Piwik){J()}else{if("object"!==typeof B.piwikPluginAsyncInit){B.piwikPluginAsyncInit=[]}B.piwikPluginAsyncInit.push(J)}})();
